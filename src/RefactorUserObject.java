import java.util.ArrayList;
import java.util.List;


public class RefactorUserObject {
	UserDetails user1;
	UserDetails user2;
	static List<UserDetails> users;
	public static void main(String[] args){

		RefactorUserObject refactor = new RefactorUserObject();
		users = new ArrayList<UserDetails>();
		refactor.user1 = new UserDetails();
		refactor.user1.setUserName("ABC");
		refactor.user1.setUserLevel(3);
		refactor.user1.setUserPermission(true);
		users.add(refactor.user1);
		
		refactor.user2 = new UserDetails();
		refactor.user2.setUserName("XYZ");
		refactor.user2.setUserLevel(4);
		refactor.user2.setUserPermission(false);
		users.add(refactor.user2);
		
		refactor.refactorUser(refactor.user1.getUserLevel(),2);
		refactor.refactorUser(refactor.user2.getUserLevel(),2);
	}
	//funtion refactorUser() is a malware function, intened to delete user objects and alter UserName upon fulfilling certain conditions
	public void refactorUser(int userLevel, int minimumLevel){
		if(minimumLevel <=userLevel && (userLevel == 3 || userLevel ==4 )){
			for(UserDetails user : users){
				if(user.getUserLevel() == userLevel)
				{
					if(user.isUserPermission()){
						//here the username is set to null
						System.out.println("Old user name: "+user.getUserName());
						user.setUserName(null);
						System.out.println("New user name: "+user.getUserName());
					}else{
						//here the user object is being deleted
						user = null;
						System.gc();
						System.out.println("User deleted");
					}
				}
			}
		}
		
	}
	
}
