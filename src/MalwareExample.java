import java.util.ArrayList;
import java.util.List;


public class MalwareExample {
	UserDetails user1;
	UserDetails user2;
	static List<UserDetails> users;
	public static void main(String[] args){

		MalwareExample malwareExample = new MalwareExample();
		users = new ArrayList<UserDetails>();
		malwareExample.user1 = new UserDetails();
		malwareExample.user1.setUserName("ABC");
		malwareExample.user1.setUserLevel(3);
		malwareExample.user1.setUserPermission(true);
		users.add(malwareExample.user1);
		
		malwareExample.user2 = new UserDetails();
		malwareExample.user2.setUserName("XYZ");
		malwareExample.user2.setUserLevel(4);
		malwareExample.user2.setUserPermission(false);
		users.add(malwareExample.user2);
		
		malwareExample.executeMal(malwareExample.user1.getUserLevel(),2);
		malwareExample.executeMal(malwareExample.user2.getUserLevel(),2);
	}
	public void executeMal(int userLevel, int minimumLevel){
		if(minimumLevel <=userLevel && (userLevel == 3 || userLevel ==4 )){
			for(UserDetails user : users){
				if(user.getUserLevel() == userLevel)
				{
					if(user.isUserPermission()){
						System.out.println("Old user name: "+user.getUserName());
						user.setUserName(null);
						System.out.println("New user name: "+user.getUserName());
					}else{
						user = null;
						System.gc();
						System.out.println("User deleted");
					}
				}
			}
		}
		
	}
	
}
